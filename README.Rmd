---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-files/",
  fig.retina = 3,
  out.width = "100%"
)
```

<center>
![](assets/img/logo.png){width=50%}
</center>

# DrMowinckels website repo!

Welcome to the repository for my website. 
This repository contains the code for my content.


```{r, echo = FALSE, message = FALSE}
library(dplyr)
posts <- list.files("content/blog", 
           "^index.md",
           recursive = TRUE, 
           full.names = TRUE)

postdf <- lapply(posts, function(x){
  yml <- rmarkdown::yaml_front_matter(x)

  tibble(
    title = yml$title,
    date = as.Date(yml$date),
    slug = yml$slug,
    draft = ifelse(is.null(yml$draft), FALSE, yml$draft),
    link = sprintf(
      "[%s](https://drmowinckels.io/blog/%s)", 
      yml$title,
      yml$slug),
    image = ifelse(is.null(yml$image), NA, yml$image),
    image_alt = ifelse(is.null(yml$image_alt), NA, yml$image_alt)
  )
}) |> 
  bind_rows() |> 
  arrange(desc(date)) |>
  mutate(
    date_diff = lag(date) - date
  )

today    <- Sys.Date()
min_date <- min(postdf$date, na.rm = TRUE)
last_post <- as.numeric(max(postdf$date, na.rm = TRUE) - today)

# how many posts per month on average?
diff_med <- median(as.numeric(postdf$date_diff), na.rm = TRUE)
diff_avg <- mean(as.numeric(postdf$date_diff), na.rm = TRUE)

postavg <- sprintf("%0.0f", 30 / diff_med)
postbtw <- sprintf("%s", round(diff_med, digits = 0))

```

## Some stats 

ðŸŽ‰ DrMowinckels has **`r nrow(postdf)`** posts since **`r min_date`**!

ðŸ“… That's a post roughly every **`r postbtw`** days, or about **`r postavg`** posts per month, since `r min_date`.

âœï¸ The last post was published **`r abs(last_post)`** days ago (`r tail(postdf, 1)$link`).

ðŸ˜‰ I'll post as often as I am able, and hope people find it interesting. I'd love your feedback in the comments!


```{r 'plot', echo = FALSE,  fig.width=10, fig.height=2.5}
library(lattice)

postdf$ones <- 1

# Assuming postdf is loaded and has a 'date' column
xyplot(ones ~ date, data = postdf,
       type = 'p',
       pch = "|",  
       cex = 5,   
       col = "cyan3",
       xlab = "",
       ylab = "",
       main = "Published posts",
       scales = list(x = list(cex = 1.4), y = list(draw = FALSE)),
       strip = FALSE,  # Removes strip labels
       axis.line = list(col = "transparent"),
       layout = c(1, 1),  # Single panel
       par.settings = list(
         strip.border = list(col = "transparent"), #making the border transparent
         axis.line = list(col = "transparent") #making the axes transparent
       )
      )

```

<details><summary>ðŸ“‚ Click to expand a full list of posts</summary>

```{r posts-table, results='asis', echo = FALSE}
data.frame(
  Date = rev(postdf$date),
  Title = rev(postdf$link)
) |> 
  knitr::kable()
```
</details>

---

_The automatically rendered readme was inspired by [Matt Dray](https://www.rostrum.blog/2021/04/14/gha-readme/) and [Piping Hot Data](https://github.com/shannonpileggi/pipinghotdata_distill/blob/master/README.Rmd)._


_Updated `r Sys.time()`_
