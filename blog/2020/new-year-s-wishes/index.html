<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, shrink-to-fit=no"
/>


<title>New Year&rsquo;s Wishes - Dr. Mowinckel&#39;s</title>


<meta name="hugo-igloo" />




  <meta name="description" content="New Year’s Wishes is a ggplot2 holiday card wishing you all a better 2021 than 2020! I find these holiday cards help me understand and explore how data need to look to create a certain output . I wanted to use ggforce::geom_circle for this, which would need x and y coordinates for the center of the circle and the radius ." />
  <meta name="author" content="Dr. Mowinckel" />






<meta name="generator" content="Hugo 0.119.0">



        

<meta prefix="og: http://ogp.me/ns#" property="og:url" content="https://drmowinckels.io/">
<meta prefix="og: http://ogp.me/ns#" property="og:type" content="website">
<meta prefix="og: http://ogp.me/ns#" property="og:title" content="New Year&rsquo;s Wishes - Dr. Mowinckel&rsquo;s">
<meta prefix="og: http://ogp.me/ns#" property="og:description" content="New Year’s Wishes is a ggplot2 holiday card wishing you all a better 2021 than 2020! I find these holiday cards help me understand and explore how data need to look to create a certain output . I wanted to use ggforce::geom_circle for this, which would need x and y coordinates for the center of the circle and the radius .">


<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="https://drmowinckels.io/">
<meta name="twitter:title" content="Igloo">
<meta name="twitter:description" content="New Year’s Wishes is a ggplot2 holiday card wishing you all a better 2021 than 2020! I find these holiday cards help me understand and explore how data need to look to create a certain output . I wanted to use ggforce::geom_circle for this, which would need x and y coordinates for the center of the circle and the radius .">



    <meta prefix="og: http://ogp.me/ns#" property="og:image" content="https://drmowinckels.io/blog/2020/new-year-s-wishes/index_files/figure-html/featured-1.png" />
    <meta name="twitter:image" content="https://drmowinckels.io/blog/2020/new-year-s-wishes/index_files/figure-html/featured-1.png">



        
  





    



 

    <link rel="stylesheet" href="https://drmowinckels.io/bundle.min.b949f82ef13ab020c09cc9a01a06b5c35de205c6382cde6ed472ebf5efc8e9d2.css" 
    integrity="sha256-uUn4LvE6sCDAnMmgGga1w13iBcY4LN5u1HLr9e/I6dI=" 
    crossorigin="anonymous">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/night-owl.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>



    <script src="https://drmowinckels.io/uikit/dist/js/uikit.min.js"></script>


    <script src="https://drmowinckels.io/uikit/dist/js/uikit-icons.min.js"></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha384-k6Rqe5g0pSv8V0e6fFfFjW1y77vKTjkE1IUaB+MHUO2GtODX6azbMqa6Y53/zJTU" crossorigin="anonymous">

        



    

    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_16x0_resize_box_3.png"
        sizes="16x16"
        type="image/png"
    />
    
    
    
        
        <link rel="shortcut icon" href="https://drmowinckels.io/favicon.ico" type="image/x-icon">
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_32x0_resize_box_3.png"
        sizes="32x32"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_57x0_resize_box_3.png"
        sizes="57x57"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_76x0_resize_box_3.png"
        sizes="76x76"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_96x0_resize_box_3.png"
        sizes="96x96"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_128x0_resize_box_3.png"
        sizes="128x128"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_120x0_resize_box_3.png"
        sizes="120x120"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_150x0_resize_box_3.png"
        sizes="150x150"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_152x0_resize_box_3.png"
        sizes="152x152"
        type="image/png"
    />
    
    
    
        <meta name="msapplication-TileImage" 
            content="/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_144x0_resize_box_3.png">
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_144x0_resize_box_3.png"
        sizes="144x144"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_180x0_resize_box_3.png"
        sizes="180x180"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_192x0_resize_box_3.png"
        sizes="192x192"
        type="image/png"
    />
    
    
    
    <link
        rel="shortcut icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_196x0_resize_box_3.png"
        sizes="196x196"
        type="image/png"
    />
<meta name="msapplication-TileColor" content="#198c8c">
<meta name="theme-color" content="#198c8c"> 
<meta name="msapplication-TileColor" content="#198c8c">

    </head>
    <body>
            
<div class="banner ">
    
        <div class="uk-container uk-container-small banner-top">
            <h1>blog</h1>
        </div>
    
</div>

        



<div id="smallnav" uk-offcanvas="flip: true" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">
        <ul class="uk-nav">
            
                <a class="uk-navbar-item uk-logo" href="https://drmowinckels.io/">
                    <img src="https://drmowinckels.io/img/logo.png" width="40">
                </a> 
            
            
                <li>
                    <a href="https://drmowinckels.io/about">
                        About
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/blog">
                        Blog
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/talks">
                        Talks
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/projects">
                        Projects
                        
                    </a>
                    
                </li>
            
        </ul>
    </div>
</div>
<a class="uk-navbar-container uk-navbar-left uk-navbar-toggle uk-hidden@s" uk-toggle="target: #smallnav" uk-navbar-toggle-icon></a>

<div class="uk-visible@s" uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
    <nav class="uk-navbar-container">   
        <div uk-navbar>     
            <div class="uk-navbar-center">
                
                    
                        <div class="uk-navbar-center-left">
                            <ul class="uk-navbar-nav">
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/about">
                            About
                            
                        </a>
                        
                    </li>
                    
                
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/blog">
                            Blog
                            
                        </a>
                        
                    </li>
                    
                            </ul>
                        </div>
                    
                
                    
                    
                        
                            <a class="uk-navbar-item uk-logo" href="https://drmowinckels.io/">
                                <img src="https://drmowinckels.io/img/logo.png" width="40">
                            </a> 
                        
                        <div class="uk-navbar-center-right">
                            <ul class="uk-navbar-nav"> 
                    
                    <li>
                        <a href="https://drmowinckels.io/talks">
                            Talks
                            
                        </a>
                        
                    </li>
                    
                
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/projects">
                            Projects
                            
                        </a>
                        
                    </li>
                    
                            </ul>
                        </div>
                    
                
            </div>
        </div>
    </nav>
</div>


        <div id="content" class="uk-container uk-container-small uk-margin-large-top">
    <article class="uk-article">
        <div class="uk-grid uk-flex-top" uk-grid>
            
            
            <div class="uk-width-1-4@s">
              <img src="https://drmowinckels.io/blog/2020/new-year-s-wishes/index_files/figure-html/featured-1.png" alt="New Year&#39;s Wishes" class="uk-border-rounded">
              
            </div>

        <div class="uk-width-3-4@s">
        <h1 class="uk-article-title">New Year&rsquo;s Wishes</h1>
        
        <div class="uk-border-top uk-article-meta uk-flex uk-flex-center uk-flex-between">
            <h3 class="uk-margin-top-small">
                Dec 31, 2020
            </h3>
            

            
                <div class="uk-flex uk-flex-wrap uk-flex-right">
                    
                        
                        
                        
                        
                        
                        <div class="uk-card uk-margin-left uk-margin-bottom">
                            <a href="https://drmowinckels.io/tags/r/" class="uk-label uk-label-secondary tags" >
                                R
                            </a>
                        </div>
                    
                        
                        
                        
                        
                        
                        <div class="uk-card uk-margin-left uk-margin-bottom">
                            <a href="https://drmowinckels.io/tags/plots/" class="uk-label uk-label-secondary tags" >
                                Plots
                            </a>
                        </div>
                    
                </div>
            
        </div>
    </div>
        <div id="offcanvas-reveal" uk-offcanvas="mode: reveal; overlay: true">
            <div class="uk-offcanvas-bar">
                <button class="uk-offcanvas-close" type="button" uk-close></button>
                <h3>Table of Content</h3>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#making-a-holiday-card">Making a holiday card</a></li>
  </ul>
</nav>
            </div>
        </div>
        
            <p class="uk-text-lead">New Year&rsquo;s Wishes is a ggplot2 holiday card wishing you all a better 2021 than 2020! I find these holiday cards help me understand and explore how data need to look to create a certain output . I wanted to use <code>ggforce::geom_circle</code> for this, which would need x and y coordinates for the center of the circle and the radius .</p>
        
        <div class="uk-markdown uk-width">
            <p>It&rsquo;s time for a new year, and I think we are all ready for it!
At least I am.</p>
<p>This is just a short post, with a ggplot2 holiday card wishing you all a better 2021 than 2020!
Let&rsquo;s face it, there not much needed for that to happen, and with vaccines being distributed I have hopes.</p>
<p>I hope the New Year, at some point, makes it possible to start going to conferences again and that I can get to meet ore R-aficionados when the time allows.</p>
<p>As previous years, I wanted to make a holiday card for you all in ggplot2.
You may ask why I keep plotting these ridiculous things in ggplot2, but the answer is quite simple: why not?
Other than being fun, it&rsquo;s also a nice exercise in thinking about and exploring how data need to look to create a certain output.
I find these holiday cards help me understand the geoms, how ggplot2 works, and how to think about grid structures.</p>
<h2 id="making-a-holiday-card">Making a holiday card</h2>
<p>The first thing I do when starting a new plot, is make sure I have a decent colour palette going.
I browse through <a href="https://www.color-hex.com/color-palette/">hex palettes</a> for palettes I like, and this time a choose one called <a href="https://www.color-hex.com/color-palette/30281">Chinese New Year - Rooster Color Palette</a>, that I thought might work.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Define a palette object</span>
</span></span><span style="display:flex;"><span>pal <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;#f90000&#34;</span>, <span style="color:#e6db74">&#34;#9a1010&#34;</span>, <span style="color:#e6db74">&#34;#f4eb1a&#34;</span>, <span style="color:#e6db74">&#34;#e1d921&#34;</span>, <span style="color:#e6db74">&#34;#e79516&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Have a look at the colours</span>
</span></span><span style="display:flex;"><span>scales<span style="color:#f92672">::</span><span style="color:#a6e22e">show_col</span>(pal)
</span></span></code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-1-1.png" alt=""><!-- --></p>
<p>Next, I had in mind a simple image, with some blurred coloured circles in the background of some white text.
So I had so make a data.frame with the basis of some circles.
I knew I wanted to use <code>ggforce::geom_circle</code> for this, which would need x and y coordinates for the center of the circle and the radius.
So I needed a data.frame with that information, and also a colour for each circle.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyverse)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Choose the number of circles to make</span>
</span></span><span style="display:flex;"><span>n_circles <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">15</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Create data.frame with coordinate, radius and colour drawn by random.</span>
</span></span><span style="display:flex;"><span>circles <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tibble</span>(
</span></span><span style="display:flex;"><span>  x <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, n_circles),
</span></span><span style="display:flex;"><span>  y <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, n_circles),
</span></span><span style="display:flex;"><span>  r <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#a6e22e">seq</span>(<span style="color:#ae81ff">.5</span>, <span style="color:#ae81ff">1.5</span>, length.out <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>), n_circles),
</span></span><span style="display:flex;"><span>  c <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(pal, n_circles, replace <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>circles
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 15 x 4
##        x     y     r c      
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;  
##  1    14     3 1.18  #9a1010
##  2     1    13 0.816 #9a1010
##  3    17    19 1.29  #f90000
##  4    19     7 0.868 #f4eb1a
##  5    18    15 1.24  #e1d921
##  6     4    10 1.39  #f90000
##  7     3     2 0.605 #e1d921
##  8     9     6 1.08  #9a1010
##  9    12    11 1.03  #e1d921
## 10     2     8 0.5   #e79516
## 11    16    20 0.553 #f4eb1a
## 12     8     1 0.974 #f4eb1a
## 13    15    12 0.711 #f90000
## 14    20     4 0.763 #9a1010
## 15    11     5 1.5   #9a1010
</code></pre><p>After that, I needed to do some stuff to make the circles blurred.
I&rsquo;ve opted for a simple solution, where I&rsquo;d overlay circles of decreasing sizes on top of each other with high transparency, which should look like a blurring effect.
To achieve that, I decided to keep to my tibble and tidyverse way of doing things.
First, I defined a separate tibble with the different sizes I want the radii to have for the blurring.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>transp <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">tibble</span>(
</span></span><span style="display:flex;"><span>      size <span style="color:#f92672">=</span> <span style="color:#a6e22e">seq</span>(from <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.9</span>, length.out <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>transp
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 10 x 1
##     size
##    &lt;dbl&gt;
##  1   1  
##  2   1.1
##  3   1.2
##  4   1.3
##  5   1.4
##  6   1.5
##  7   1.6
##  8   1.7
##  9   1.8
## 10   1.9
</code></pre><p>Using this, I needed to make sure that each circle (every row in the <code>circles</code> tibble) gets this blurring working.
The best way I know how, is nesting the data by everything but radius, then merge the radius tibble with the transparency tibble, and unnest again.
Lastly I can multiply the radius with the size, and get a large data.frame with lots of circles of different sizes, but many sharing a center and colour.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Nesting data moved all non-grouped columns into a &#34;data&#34; column</span>
</span></span><span style="display:flex;"><span>circles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">nest_by</span>(x, y, c)
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 15 x 4
## # Rowwise:  x, y, c
##        x     y c                     data
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;list&lt;tbl_df[,1]&gt;&gt;
##  1     1    13 #9a1010            [1 × 1]
##  2     2     8 #e79516            [1 × 1]
##  3     3     2 #e1d921            [1 × 1]
##  4     4    10 #f90000            [1 × 1]
##  5     8     1 #f4eb1a            [1 × 1]
##  6     9     6 #9a1010            [1 × 1]
##  7    11     5 #9a1010            [1 × 1]
##  8    12    11 #e1d921            [1 × 1]
##  9    14     3 #9a1010            [1 × 1]
## 10    15    12 #f90000            [1 × 1]
## 11    16    20 #f4eb1a            [1 × 1]
## 12    17    19 #f90000            [1 × 1]
## 13    18    15 #e1d921            [1 × 1]
## 14    19     7 #f4eb1a            [1 × 1]
## 15    20     4 #9a1010            [1 × 1]
</code></pre><p>Once the data is nested, the <code>radius</code> column is all alone, nested within the <code>data</code> column of the tibble.
This way we can safely merge the <code>transp</code> object with that data, which will duplicate the radius number for every row in the <code>transp</code> object.
Here, we must make sure that within the <code>mutate</code> the output of the merge is nested within a <code>list()</code>.
The <code>data</code> colum is a so-called list-column, and as such the output of any manipulation of it must also be a list.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Merge the data column with the transp object, </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># make sure it outputs into a list to work with nested data</span>
</span></span><span style="display:flex;"><span>circles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">nest_by</span>(x, y, c) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(data <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">merge</span>(data, transp)))
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 15 x 4
## # Rowwise:  x, y, c
##        x     y c       data             
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;list&gt;           
##  1     1    13 #9a1010 &lt;df[,2] [10 × 2]&gt;
##  2     2     8 #e79516 &lt;df[,2] [10 × 2]&gt;
##  3     3     2 #e1d921 &lt;df[,2] [10 × 2]&gt;
##  4     4    10 #f90000 &lt;df[,2] [10 × 2]&gt;
##  5     8     1 #f4eb1a &lt;df[,2] [10 × 2]&gt;
##  6     9     6 #9a1010 &lt;df[,2] [10 × 2]&gt;
##  7    11     5 #9a1010 &lt;df[,2] [10 × 2]&gt;
##  8    12    11 #e1d921 &lt;df[,2] [10 × 2]&gt;
##  9    14     3 #9a1010 &lt;df[,2] [10 × 2]&gt;
## 10    15    12 #f90000 &lt;df[,2] [10 × 2]&gt;
## 11    16    20 #f4eb1a &lt;df[,2] [10 × 2]&gt;
## 12    17    19 #f90000 &lt;df[,2] [10 × 2]&gt;
## 13    18    15 #e1d921 &lt;df[,2] [10 × 2]&gt;
## 14    19     7 #f4eb1a &lt;df[,2] [10 × 2]&gt;
## 15    20     4 #9a1010 &lt;df[,2] [10 × 2]&gt;
</code></pre><p>Once they are merged, we can unnest and see that our new circles object has lots of new rows!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># Unnest the data, so that a large tibble exposed (lots of rows!)</span>
</span></span><span style="display:flex;"><span>circles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">nest_by</span>(x, y, c) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(data <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">merge</span>(data, transp))) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unnest</span>(data)
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 150 x 5
## # Groups:   x, y, c [15]
##        x     y c           r  size
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1     1    13 #9a1010 0.816   1  
##  2     1    13 #9a1010 0.816   1.1
##  3     1    13 #9a1010 0.816   1.2
##  4     1    13 #9a1010 0.816   1.3
##  5     1    13 #9a1010 0.816   1.4
##  6     1    13 #9a1010 0.816   1.5
##  7     1    13 #9a1010 0.816   1.6
##  8     1    13 #9a1010 0.816   1.7
##  9     1    13 #9a1010 0.816   1.8
## 10     1    13 #9a1010 0.816   1.9
## # … with 140 more rows
</code></pre><p>Then the <code>size</code> column can be multiplied with the <code>radius</code> column, to get circles of different sizes.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#75715e"># multiply r with the size to get the &#34;true&#34; radius.</span>
</span></span><span style="display:flex;"><span>circles <span style="color:#f92672">&lt;-</span> circles <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">nest_by</span>(x, y, c) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(data <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(<span style="color:#a6e22e">merge</span>(data, transp))) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">unnest</span>(data) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutate</span>(r <span style="color:#f92672">=</span> r<span style="color:#f92672">*</span>size)
</span></span><span style="display:flex;"><span>circles
</span></span></code></pre></div><pre tabindex="0"><code>## # A tibble: 150 x 5
## # Groups:   x, y, c [15]
##        x     y c           r  size
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
##  1     1    13 #9a1010 0.816   1  
##  2     1    13 #9a1010 0.897   1.1
##  3     1    13 #9a1010 0.979   1.2
##  4     1    13 #9a1010 1.06    1.3
##  5     1    13 #9a1010 1.14    1.4
##  6     1    13 #9a1010 1.22    1.5
##  7     1    13 #9a1010 1.31    1.6
##  8     1    13 #9a1010 1.39    1.7
##  9     1    13 #9a1010 1.47    1.8
## 10     1    13 #9a1010 1.55    1.9
## # … with 140 more rows
</code></pre><p>Then it&rsquo;s all about plotting the data.
Initially, I wanted a small animation like blinking of the circles, but I&rsquo;ve decided to leave it as is for now.</p>
<p>Loading in ggforce, we get the geom_circle available.
I&rsquo;m also using a small colour hack a found a long time ago.
When I have the colours in the data.frame directly, as it&rsquo;s own column, I usually use the identity function (<code>I()</code>) directly in the ggplot2 calls, rather than <code>scale_colour_identity</code>.
It&rsquo;s just something I got used to.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggforce)
</span></span><span style="display:flex;"><span>alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ggplot</span>(circles, <span style="color:#a6e22e">aes</span>(fill <span style="color:#f92672">=</span> <span style="color:#a6e22e">I</span>(c))) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Add all the circles</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_circle</span>(alpha <span style="color:#f92672">=</span> <span style="color:#ae81ff">.1</span>, colour <span style="color:#f92672">=</span> <span style="color:#66d9ef">NA</span>, 
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">aes</span>(x0 <span style="color:#f92672">=</span> x, y0 <span style="color:#f92672">=</span> y, r <span style="color:#f92672">=</span> r)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Add text at the center, but a little higher (+5)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_text</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(circles<span style="color:#f92672">$</span>x), 
</span></span><span style="display:flex;"><span>                y <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(circles<span style="color:#f92672">$</span>y)<span style="color:#ae81ff">+5</span>, 
</span></span><span style="display:flex;"><span>                label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Happy New Year&#34;</span>),
</span></span><span style="display:flex;"><span>            family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Great Vibes&#34;</span>,
</span></span><span style="display:flex;"><span>            colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#fefefe&#34;</span>,
</span></span><span style="display:flex;"><span>            size <span style="color:#f92672">=</span> <span style="color:#ae81ff">14</span>,
</span></span><span style="display:flex;"><span>            show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># Add text at the center but a little loswer (-5)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">geom_text</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(circles<span style="color:#f92672">$</span>x), 
</span></span><span style="display:flex;"><span>                y <span style="color:#f92672">=</span> <span style="color:#a6e22e">mean</span>(circles<span style="color:#f92672">$</span>y)<span style="color:#ae81ff">-5</span>, 
</span></span><span style="display:flex;"><span>                label <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Adios 2020!&#34;</span>),
</span></span><span style="display:flex;"><span>              family <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Great Vibes&#34;</span>,
</span></span><span style="display:flex;"><span>            size <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>,
</span></span><span style="display:flex;"><span>            colour <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;#fefefe&#34;</span>,
</span></span><span style="display:flex;"><span>            show.legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme_void</span>() <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">theme</span>(plot.background <span style="color:#f92672">=</span> <span style="color:#a6e22e">element_rect</span>(fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;black&#34;</span>)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">NULL</span>
</span></span></code></pre></div><img src="index_files/figure-html/featured-1.png" width="480" />

        </div>
    </article><div class="uk-margin">
    <button  class="uk-button uk-button-default" uk-toggle="target: #citation; animation: uk-animation-fade" type="button">
        Cite me!
    </button>
    <div id="citation" hidden class="uk-margin">
        <div uk-grid class="uk-child-width-1-2@s">
            <div>
                For attribution, please cite this work as
                <div class="uk-card uk-card-default uk-card-bod uk-text-breaky">
                    Dr. Mowinckel 
                    (Dec 31, 2020) 
                    New Year&#39;s Wishes. 
                    Retrieved from https://drmowinckels.io/blog/2020/new-year-s-wishes/.
                     DOI: https://www.doi.org/10.5281/zenodo.13273510
                </div>
            </div>
            <div>
                <b>BibTeX citation</b>
                <div class="uk-card uk-card-default uk-card-body uk-text-break">
                    @misc{ <br>
                        2020-new-years-wishes,<br>
                        &emsp;author =  "Dr. Mowinckel",<br>
                        &emsp;title = "New Year&#39;s Wishes",<br>
                        &emsp;url = "https://drmowinckels.io/blog/2020/new-year-s-wishes/",<br>
                        &emsp;year = 2020,<br>
                         &emsp;doi = "https://www.doi.org/10.5281/zenodo.13273510",<br> 
                        &emsp;updated = "Oct 7, 2024"<br>
                    }
                </div>
            </div>
        </div>
    </div>
</div><div class="uk-grid uk-child-width-expand@s uk-margin-top" uk-grid>
    <div class="uk-width-expand">
        
            <a class="uk-button uk-button-default" href="https://drmowinckels.io/blog/2020/r-package-advent-calendar/">
                <span class="uk-margin-small-left" uk-icon="chevron-double-left"></span>
                R-Package Advent Calendar 2020
            </a>
        
    </div>
    
    <div class="uk-width-auto">
        
            <a class="uk-button uk-button-default" href="https://drmowinckels.io/blog/2021/new-ggseg-with-geom/">
                New {ggseg} with Geom!
                <span class="uk-margin-small-right" uk-icon="chevron-double-right"></span>
            </a>
        
    </div>
</div>

    
    
        <div class="uk-container uk-margin-top">
            <script src="https://giscus.app/client.js"
                data-repo=DrMowinckels/drmowinckels.github.io
                data-repo-id=MDEwOlJlcG9zaXRvcnkxMjM0NzEwMTI&#61;
                data-category=Comments
                data-category-id=DIC_kwDOB1wEpM4CAG0c
                data-mapping=pathname
                data-reactions-enabled=1
                data-emit-metadata=0
                data-theme=light
                data-lang=en
                crossorigin="anonymous"
                async>
            </script>
</div>

    

        </div><div class="section uk-section uk-padding-remove-vertical uk-margin">
    <div class="banner footer" height="500px">
        <div class="uk-container">
            <div class="uk-grid" uk-grid>
                <div class="uk-width-1-2@m">
                    
                      <h3><i class="fa-regular fa-copyright"></i> 2023 Athanasia Mo Mowinckel</h3>
                      <p></p>
                    
                  </div>
              <div class="uk-width-1-2@m">
                
              </div>
            </div>
          </div>
          <div class="footer-title uk-text-right">
            <h1>Dr. Mowinckel&rsquo;s</h1>
        </div>
    </div>
</div>
</body>
</html>
