<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, shrink-to-fit=no"
/>


<title>Rmarkdown Child Templates - Dr. Mowinckel&#39;s</title>


<meta name="hugo-igloo" />




  <meta name="description" content="Rmarkdown has been working on a set of analyses from a survey at work . The survey has two basic type of questions, likert-scale questions and binary yes/no questions . For each of these two types of . questions, I’ve needed to generate a . set of descriptive plots and tables, as well as run a particular set of statistical models . I know how to make Rmark down parametrised reports, and I kind of wanted something similar, but in a nested fashion ." />
  <meta name="author" content="Athanasia M. Mowinckel" />






<meta name="generator" content="Hugo 0.119.0">



        

<meta prefix="og: http://ogp.me/ns#" property="og:url" content="https://drmowinckels.io/">
<meta prefix="og: http://ogp.me/ns#" property="og:type" content="website">
<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Rmarkdown Child Templates - Dr. Mowinckel&rsquo;s">
<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Rmarkdown has been working on a set of analyses from a survey at work . The survey has two basic type of questions, likert-scale questions and binary yes/no questions . For each of these two types of . questions, I’ve needed to generate a . set of descriptive plots and tables, as well as run a particular set of statistical models . I know how to make Rmark down parametrised reports, and I kind of wanted something similar, but in a nested fashion .">


<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:domain" content="https://drmowinckels.io/">
<meta name="twitter:title" content="Igloo">
<meta name="twitter:description" content="Rmarkdown has been working on a set of analyses from a survey at work . The survey has two basic type of questions, likert-scale questions and binary yes/no questions . For each of these two types of . questions, I’ve needed to generate a . set of descriptive plots and tables, as well as run a particular set of statistical models . I know how to make Rmark down parametrised reports, and I kind of wanted something similar, but in a nested fashion .">



    <meta prefix="og: http://ogp.me/ns#" property="og:image" content="https://drmowinckels.io/blog/2021/rmarkdown-child-templates/parent-and-child-md.png" />
    <meta name="twitter:image" content="https://drmowinckels.io/blog/2021/rmarkdown-child-templates/parent-and-child-md.png">



        
  





    



 

    <link rel="stylesheet" href="https://drmowinckels.io/bundle.min.b949f82ef13ab020c09cc9a01a06b5c35de205c6382cde6ed472ebf5efc8e9d2.css" 
    integrity="sha256-uUn4LvE6sCDAnMmgGga1w13iBcY4LN5u1HLr9e/I6dI=" 
    crossorigin="anonymous">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous">


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/night-owl.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>



    <script src="https://drmowinckels.io/uikit/dist/js/uikit.min.js"></script>


    <script src="https://drmowinckels.io/uikit/dist/js/uikit-icons.min.js"></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha384-k6Rqe5g0pSv8V0e6fFfFjW1y77vKTjkE1IUaB+MHUO2GtODX6azbMqa6Y53/zJTU" crossorigin="anonymous">

        



    

    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_16x0_resize_box_3.png"
        sizes="16x16"
        type="image/png"
    />
    
    
    
        
        <link rel="shortcut icon" href="https://drmowinckels.io/favicon.ico" type="image/x-icon">
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_32x0_resize_box_3.png"
        sizes="32x32"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_57x0_resize_box_3.png"
        sizes="57x57"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_76x0_resize_box_3.png"
        sizes="76x76"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_96x0_resize_box_3.png"
        sizes="96x96"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_128x0_resize_box_3.png"
        sizes="128x128"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_120x0_resize_box_3.png"
        sizes="120x120"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_150x0_resize_box_3.png"
        sizes="150x150"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_152x0_resize_box_3.png"
        sizes="152x152"
        type="image/png"
    />
    
    
    
        <meta name="msapplication-TileImage" 
            content="/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_144x0_resize_box_3.png">
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_144x0_resize_box_3.png"
        sizes="144x144"
        type="image/png"
    />
    
    
    
    <link
        rel="apple-touch-icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_180x0_resize_box_3.png"
        sizes="180x180"
        type="image/png"
    />
    
    
    
    <link
        rel="icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_192x0_resize_box_3.png"
        sizes="192x192"
        type="image/png"
    />
    
    
    
    <link
        rel="shortcut icon"
        href="https://drmowinckels.io/img/fav.ico_hu5c0771520169a7c5939dfeb49415bb9c_5256_196x0_resize_box_3.png"
        sizes="196x196"
        type="image/png"
    />
<meta name="msapplication-TileColor" content="#198c8c">
<meta name="theme-color" content="#198c8c"> 
<meta name="msapplication-TileColor" content="#198c8c">

    </head>
    <body>
            
<div class="banner ">
    
        <div class="uk-container uk-container-small banner-top">
            <h1>blog</h1>
        </div>
    
</div>

        



<div id="smallnav" uk-offcanvas="flip: true" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">
        <ul class="uk-nav">
            
                <a class="uk-navbar-item uk-logo" href="https://drmowinckels.io/">
                    <img src="https://drmowinckels.io/img/logo.png" width="40">
                </a> 
            
            
                <li>
                    <a href="https://drmowinckels.io/about">
                        About
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/blog">
                        Blog
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/talks">
                        Talks
                        
                    </a>
                    
                </li>
            
                <li>
                    <a href="https://drmowinckels.io/projects">
                        Projects
                        
                    </a>
                    
                </li>
            
        </ul>
    </div>
</div>
<a class="uk-navbar-container uk-navbar-left uk-navbar-toggle uk-hidden@s" uk-toggle="target: #smallnav" uk-navbar-toggle-icon></a>

<div class="uk-visible@s" uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
    <nav class="uk-navbar-container">   
        <div uk-navbar>     
            <div class="uk-navbar-center">
                
                    
                        <div class="uk-navbar-center-left">
                            <ul class="uk-navbar-nav">
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/about">
                            About
                            
                        </a>
                        
                    </li>
                    
                
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/blog">
                            Blog
                            
                        </a>
                        
                    </li>
                    
                            </ul>
                        </div>
                    
                
                    
                    
                        
                            <a class="uk-navbar-item uk-logo" href="https://drmowinckels.io/">
                                <img src="https://drmowinckels.io/img/logo.png" width="40">
                            </a> 
                        
                        <div class="uk-navbar-center-right">
                            <ul class="uk-navbar-nav"> 
                    
                    <li>
                        <a href="https://drmowinckels.io/talks">
                            Talks
                            
                        </a>
                        
                    </li>
                    
                
                    
                    
                    <li>
                        <a href="https://drmowinckels.io/projects">
                            Projects
                            
                        </a>
                        
                    </li>
                    
                            </ul>
                        </div>
                    
                
            </div>
        </div>
    </nav>
</div>


        <div id="content" class="uk-container uk-container-small uk-margin-large-top">
    <article class="uk-article">
        <div class="uk-grid uk-flex-top" uk-grid>
            
            
            <div class="uk-width-1-4@s">
              <img src="https://drmowinckels.io/blog/2021/rmarkdown-child-templates/parent-and-child-md.png" alt="Rmarkdown Child Templates" class="uk-border-rounded">
              
            </div>

        <div class="uk-width-3-4@s">
        <h1 class="uk-article-title">Rmarkdown Child Templates</h1>
        
        <div class="uk-border-top uk-article-meta uk-flex uk-flex-center uk-flex-between">
            <h3 class="uk-margin-top-small">
                Dec 17, 2021
            </h3>
            

            
                <div class="uk-flex uk-flex-wrap uk-flex-right">
                    
                        
                        
                        
                        
                        
                        <div class="uk-card uk-margin-left uk-margin-bottom">
                            <a href="https://drmowinckels.io/tags/knitr/" class="uk-label uk-label-secondary tags" >
                                knitr
                            </a>
                        </div>
                    
                        
                        
                        
                        
                        
                        <div class="uk-card uk-margin-left uk-margin-bottom">
                            <a href="https://drmowinckels.io/tags/rmarkdown/" class="uk-label uk-label-secondary tags" >
                                rmarkdown
                            </a>
                        </div>
                    
                </div>
            
        </div>
    </div>
        <div id="offcanvas-reveal" uk-offcanvas="mode: reveal; overlay: true">
            <div class="uk-offcanvas-bar">
                <button class="uk-offcanvas-close" type="button" uk-close></button>
                <h3>Table of Content</h3>
                <nav id="TableOfContents">
  <ul>
    <li><a href="#create-the-rmd">Create the Rmd</a></li>
    <li><a href="#making-the-child-document">Making the child document</a></li>
    <li><a href="#knitr-child-document">Knitr child document</a></li>
  </ul>
</nav>
            </div>
        </div>
        
            <p class="uk-text-lead">Rmarkdown has been working on a set of analyses from a survey at work . The survey has two basic type of questions, likert-scale questions and binary yes/no questions . For each of these two types of . questions, I’ve needed to generate a . set of descriptive plots and tables, as well as run a particular set of statistical models . I know how to make Rmark down parametrised reports, and I kind of wanted something similar, but in a nested fashion .</p>
        
        <div class="uk-markdown uk-width">
            <p>I have recently been working on a set of analyses from a survey at work.
This has been really fun, but also a little tedious.
The survey has two basic type of questions, likert-scale questions and binary yes/no questions.
For each of these two types of questions, I’ve needed to generate a set of descriptive plots and tables, as well as run a particular set of statistical models.</p>
<p>I was doing <em>a lot</em> of copy and paste of code, with whole code chunks and text for each of the questions, then doing simple search and replace of data and strings.
Tedious.</p>
<p>I know how to make Rmarkdown parametrised reports, and I kind of wanted something similar, but in a nested fashion.
Ideally, I wanted a type of Rmarkdown parametrised report I could provide data, titles and small text snippets to to generate a whole set of descriptives and statistics for me for the various questions.
But I could not find any of the sort.</p>
<p>As I often do, I went to the #Rstats twitter Gods for help.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Rmd wishlist: a parametrized sub-section. <br><br>A way to input whole sections (text and chunks) with some parameters. I have q&#39;s following two basic logics, and thus two sets of text+chunk based on these. I&#39;d love to not copy+paste + edit all these sections, just input as sub-report</p>&mdash; Athanasia Mo Mowinckel @Drmowinckels@fosstodon.org (@DrMowinckels) <a href="https://twitter.com/DrMowinckels/status/1447518834005532676?ref_src=twsrc%5Etfw">October 11, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>And this was not at all a super easy thing to do, it turns out!
We had some nice conversations and people offered awesome advice.
#Rstats twitter really is the best!</p>
<p>In the end, I opted for a solution that looked really awesome, and I currently cannot find the tweet that pointed me in that direction (if anyone finds it, let me know so I can attribute properly!)</p>
<p>Let’s make some files to test!</p>
<h2 id="create-the-rmd">Create the Rmd</h2>
<p>First off, we will make an Rmd file, by going to File -&gt; New file -&gt; Rmarkdown … in RStudio, then choose to create a PDF.</p>
<p><img src="create_rmd.png" alt="Image of the RStudio UI showing how to create a new Rmarkdown file"></p>
<p><img src="main_pdf.png" alt="Image of the RStudio UI showing how to create a new Rmarkdown file"></p>
<p>Now we have a main document to create from. This is the document where we will call on other rmarkdown templates to be added.</p>
<p>I deleted everything in the <a href="https://github.com/Athanasiamo/DrMowinckels/tree/master/content/blog/2021-12-17-rmarkdown-child-templates/main-document.Rmd">main document</a> (we could have just created an empty one in the step before also).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>```{r setup, include=FALSE}
</span></span><span style="display:flex;"><span>knitr::opts_chunk$set(echo = TRUE)
</span></span><span style="display:flex;"><span>```
</span></span></code></pre></div><p>SO we have a document now, that will knit to pdf, and where code chunk code will be rendered in the document.</p>
<p>Let us make some stuff to plot.
We’ll use the palmerpenguins package and dataset, and make a plot of penguins bill length against bill depth, and a summary table of the mean, min and maximum values of these two measures.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(ggplot2)
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(dplyr)
</span></span></code></pre></div><pre><code>## 
## Attaching package: 'dplyr'

## The following objects are masked from 'package:stats':
## 
##     filter, lag

## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(palmerpenguins)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>penguins <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ggplot</span>(<span style="color:#a6e22e">aes</span>(x <span style="color:#f92672">=</span> bill_length_mm, y <span style="color:#f92672">=</span> bill_depth_mm)) <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">geom_point</span>()
</span></span></code></pre></div><pre><code>## Warning: Removed 2 rows containing missing values (geom_point).
</code></pre>
<img src="https://drmowinckels.io/blog/2021/rmarkdown-child-templates/index_files/figure-html/unnamed-chunk-2-1.png" width="672" />
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#a6e22e">library</span>(tidyr)
</span></span><span style="display:flex;"><span>penguins <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pivot_longer</span>(<span style="color:#a6e22e">ends_with</span>(<span style="color:#e6db74">&#34;mm&#34;</span>),
</span></span><span style="display:flex;"><span>               names_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;cols&#34;</span>,
</span></span><span style="display:flex;"><span>               values_to <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mm&#34;</span>, 
</span></span><span style="display:flex;"><span>               values_drop_na <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">group_by</span>(cols) <span style="color:#f92672">%&gt;%</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">summarise</span>(<span style="color:#a6e22e">across</span>(mm, 
</span></span><span style="display:flex;"><span>                   .fns <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(mean <span style="color:#f92672">=</span> mean, 
</span></span><span style="display:flex;"><span>                               min <span style="color:#f92672">=</span> min, 
</span></span><span style="display:flex;"><span>                               max <span style="color:#f92672">=</span> max,
</span></span><span style="display:flex;"><span>                               N <span style="color:#f92672">=</span> length),
</span></span><span style="display:flex;"><span>                    .names <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;{.fn}&#34;</span>)
</span></span><span style="display:flex;"><span>  )
</span></span></code></pre></div><pre><code>## # A tibble: 3 × 5
##   cols               mean   min   max     N
##   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1 bill_depth_mm      17.2  13.1  21.5   342
## 2 bill_length_mm     43.9  32.1  59.6   342
## 3 flipper_length_mm 201.  172   231     342
</code></pre>
<p>We did quite a lot here, and I for once don’t intend on digging into the details of what I did.
You can read lots about <a href="https://tidyr.tidyverse.org/articles/pivot.html#longer-2">pivoting</a> on the tidyverse pages.</p>
<p>ok. SO we now have an overall plot and table for all the penguins.
But say I want to have one section for each of the three penguins species.
And lets forget about grouping data and making colours in the plots to easily see the species.
We want, one chapter per penguin species.</p>
<p>How do we do that?</p>
<p>We could copy and paste the code, with filters to only grab the species we want.
But we’d have to do that three times, and if we wanted to change something, we’d have to change it in all three places.
Things could easily get very cumbersome.</p>
<p>We can make a so-called “child”-document, and provide it with what it needed to create what we wanted.
The child document will be another Rmd, that will depend on certain things existing in its <code>enviroment</code> to run.
Since <a href="https://github.com/yihui/knitr/issues/1884">child documents cannot be parametrised</a> this was in my opinion the smoothest solution.</p>
<h2 id="making-the-child-document">Making the child document</h2>
<p>Create a new Rmarkdown file like before, and name it something meaningful.
I’ll call it <a href="https://github.com/Athanasiamo/DrMowinckels/tree/master/content/blog/2021-12-17-rmarkdown-child-templates/species-child.Rmd"><code>species-child.Rmd</code></a>, in this case, choose the “Create empty document” in the RStudio UI.</p>
<p>This document will not have any other yaml than the type of output is should contain.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"></code></pre></div><p>Then we can copy in our plot and table code, so that we can build on that.
I’ll choose the simplest way I can think of to do this, and that is by having a single object in the environment of the child document that will let our code know which species it should base it self on.
We’ll call the object <code>species</code>, and have a piece of code in our child document that creates an object called <code>data</code> which only contains that species from the penguins data set.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span><span style="color:#75715e">## Species `r species`
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>```{r setup, include=FALSE}
</span></span><span style="display:flex;"><span>knitr::opts_chunk$set(echo = TRUE)
</span></span><span style="display:flex;"><span>library(ggplot2)
</span></span><span style="display:flex;"><span>library(dplyr)
</span></span><span style="display:flex;"><span>library(palmerpenguins)
</span></span><span style="display:flex;"><span>library(tidyr)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Filter the penguins data by species
</span></span><span style="display:flex;"><span>data &lt;<span style="color:#f92672">-</span> <span style="color:#a6e22e">filter</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">penguins</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">species </span><span style="color:#f92672">=</span><span style="color:#e6db74">=</span> <span style="color:#a6e22e">species</span><span style="color:#960050;background-color:#1e0010">)</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">```
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"></span>
</span></span><span style="display:flex;"><span>```{r}
</span></span><span style="display:flex;"><span>data %&gt;% 
</span></span><span style="display:flex;"><span>  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +
</span></span><span style="display:flex;"><span>  geom_point()
</span></span><span style="display:flex;"><span><span style="color:#e6db74">```</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">```{</span><span style="color:#a6e22e">r</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">data</span> <span style="color:#960050;background-color:#1e0010">%</span>&gt;% 
</span></span><span style="display:flex;"><span>  pivot_longer(ends_with(&#34;mm&#34;),
</span></span><span style="display:flex;"><span>               names_to = &#34;cols&#34;,
</span></span><span style="display:flex;"><span>               values_to = &#34;mm&#34;, 
</span></span><span style="display:flex;"><span>               values_drop_na = TRUE) %&gt;% 
</span></span><span style="display:flex;"><span>  group_by(cols) %&gt;% 
</span></span><span style="display:flex;"><span>  summarise(across(mm, 
</span></span><span style="display:flex;"><span>                   .fns = list(mean = mean, 
</span></span><span style="display:flex;"><span>                               min = min, 
</span></span><span style="display:flex;"><span>                               max = max,
</span></span><span style="display:flex;"><span>                               N = length),
</span></span><span style="display:flex;"><span>                    .names = &#34;{.fn}&#34;)
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span>```
</span></span></code></pre></div><p>Ok, so out child doc is ready.
How do we call it from the main document (parent) and how to we give it the species variable if we cannot give it parameters?</p>
<h2 id="knitr-child-document">Knitr child document</h2>
<p>The knitr package has a particular function to knit child documents, and you can <a href="https://bookdown.org/yihui/rmarkdown-cookbook/child-document.html">read more about it in the Rmarkdown cookbook</a>.
We are going to do something not particularly highlighted there, and use an option in that function were you provide an R environment to the child document.
Child documents, just like all Rmarkdown documents, are knit in clean environments, making them awesome reproducible documents, they won’t render if you rely on things existing in your environment that is not generated by code.
By using the <code>envir</code> option in the function, we can provide the species designation to the child document, so that it renders only the species we ask for!</p>
<p>In your main document, add the below code, which creates a new environment, adds an object <code>species</code> with the string “Adelie” in it, knits the child document and saves the output to an object in the main document, an then prints the output into the main document.</p>
<p><strong>NOTE</strong> notice how the code chunk in the main document has <code>results = 'asis'</code> specified. This is important. Knitr will create the markdown needed to create the pdf, so the output of the code chunk is actually markdown that we want to be knitted to latex then pdf.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>```{r, results = &#39;asis&#39;}
</span></span><span style="display:flex;"><span># Define new environment
</span></span><span style="display:flex;"><span>child_env &lt;<span style="color:#f92672">-</span> <span style="color:#a6e22e">new</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">env</span><span style="color:#960050;background-color:#1e0010">()</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">child_env</span><span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">species</span> <span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">-</span> <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">Adelie</span><span style="color:#960050;background-color:#1e0010">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># knit the document and save the character output to an object
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">res</span> <span style="color:#960050;background-color:#1e0010">&lt;</span><span style="color:#a6e22e">-</span> <span style="color:#a6e22e">knitr::knit_child</span><span style="color:#960050;background-color:#1e0010">(</span>
</span></span><span style="display:flex;"><span>  <span style="color:#960050;background-color:#1e0010">&#34;</span><span style="color:#a6e22e">species-child</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#a6e22e">Rmd</span><span style="color:#960050;background-color:#1e0010">&#34;,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">envir </span><span style="color:#f92672">=</span> <span style="color:#e6db74">child_env,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">quiet </span><span style="color:#f92672">=</span> <span style="color:#e6db74">TRUE</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Cat the object to make it render in your main document
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">cat</span><span style="color:#960050;background-color:#1e0010">(</span><span style="color:#a6e22e">res</span><span style="color:#960050;background-color:#1e0010">,</span> <span style="color:#a6e22e">sep </span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;</span>\n<span style="color:#e6db74">&#39;</span><span style="color:#960050;background-color:#1e0010">)</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">```</span>
</span></span></code></pre></div><p>Now, we can copy and paste that code chunk for all three species, and have a neat little report made.
You can have a look at the documents in the github repo of this post, and hopefully it will make some sense.</p>
<ul>
<li><a href="https://github.com/Athanasiamo/DrMowinckels/tree/master/content/blog/2021-12-17-rmarkdown-child-templates/main-document.Rmd">Main document</a></li>
<li><a href="https://github.com/Athanasiamo/DrMowinckels/tree/master/static/blog/2021-12-17-rmarkdown-child-templates/species-child.Rmd">Child document</a></li>
</ul>

        </div>
    </article><div class="uk-margin">
    <button  class="uk-button uk-button-default" uk-toggle="target: #citation; animation: uk-animation-fade" type="button">
        Cite me!
    </button>
    <div id="citation" hidden class="uk-margin">
        <div uk-grid class="uk-child-width-1-2@s">
            <div>
                For attribution, please cite this work as
                <div class="uk-card uk-card-default uk-card-bod uk-text-breaky">
                    Athanasia M. Mowinckel 
                    (Dec 17, 2021) 
                    Rmarkdown Child Templates. 
                    Retrieved from https://drmowinckels.io/blog/2021/rmarkdown-child-templates/.
                     DOI: https://www.doi.org/10.5281/zenodo.13273520
                </div>
            </div>
            <div>
                <b>BibTeX citation</b>
                <div class="uk-card uk-card-default uk-card-body uk-text-break">
                    @misc{ <br>
                        2021-rmarkdown-child-templates,<br>
                        &emsp;author =  "Athanasia M. Mowinckel",<br>
                        &emsp;title = "Rmarkdown Child Templates",<br>
                        &emsp;url = "https://drmowinckels.io/blog/2021/rmarkdown-child-templates/",<br>
                        &emsp;year = 2021,<br>
                         &emsp;doi = "https://www.doi.org/10.5281/zenodo.13273520",<br> 
                        &emsp;updated = "Oct 7, 2024"<br>
                    }
                </div>
            </div>
        </div>
    </div>
</div><div class="uk-grid uk-child-width-expand@s uk-margin-top" uk-grid>
    <div class="uk-width-expand">
        
            <a class="uk-button uk-button-default" href="https://drmowinckels.io/blog/2021/adding-giscus-to-your-blogdown-site/">
                <span class="uk-margin-small-left" uk-icon="chevron-double-left"></span>
                Adding giscus to your blogdown site
            </a>
        
    </div>
    
    <div class="uk-width-auto">
        
            <a class="uk-button uk-button-default" href="https://drmowinckels.io/blog/2022/lets-get-applying/">
                Let&rsquo;s Get Apply&rsquo;ing
                <span class="uk-margin-small-right" uk-icon="chevron-double-right"></span>
            </a>
        
    </div>
</div>

    
    
        <div class="uk-container uk-margin-top">
            <script src="https://giscus.app/client.js"
                data-repo=DrMowinckels/drmowinckels.github.io
                data-repo-id=MDEwOlJlcG9zaXRvcnkxMjM0NzEwMTI&#61;
                data-category=Comments
                data-category-id=DIC_kwDOB1wEpM4CAG0c
                data-mapping=pathname
                data-reactions-enabled=1
                data-emit-metadata=0
                data-theme=light
                data-lang=en
                crossorigin="anonymous"
                async>
            </script>
</div>

    

        </div><div class="section uk-section uk-padding-remove-vertical uk-margin">
    <div class="banner footer" height="500px">
        <div class="uk-container">
            <div class="uk-grid" uk-grid>
                <div class="uk-width-1-2@m">
                    
                      <h3><i class="fa-regular fa-copyright"></i> 2023 Athanasia Mo Mowinckel</h3>
                      <p></p>
                    
                  </div>
              <div class="uk-width-1-2@m">
                
              </div>
            </div>
          </div>
          <div class="footer-title uk-text-right">
            <h1>Dr. Mowinckel&rsquo;s</h1>
        </div>
    </div>
</div>
</body>
</html>
