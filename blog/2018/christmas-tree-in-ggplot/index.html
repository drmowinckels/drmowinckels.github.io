<!DOCTYPE html>
<html lang="en">
    <head>
        
            <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<title>
Christmas Tree in Ggplot - Dr. Mowinckel&rsquo;s
</title>



            <meta property="og:title" content="Christmas tree in ggplot - Dr. Mowinckel&rsquo;s" />
<meta property="og:type" content="website" />
<meta property="og:description" content=""/>
<meta property="og:url" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/"/>
<meta property="og:site_name" content="Dr. Mowinckel&rsquo;s"/>



<meta property="og:image" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/index_files/figure-html/featured-1.gif"/>

<meta property="og:image" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/index_files/figure-html/unnamed-chunk-1-1.png"/>

<meta property="og:image" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/index_files/figure-html/unnamed-chunk-2-1.png"/>

<meta property="og:image" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/index_files/figure-html/unnamed-chunk-3-1.png"/>

<meta property="og:image" content="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/index_files/figure-html/unnamed-chunk-4-1.gif"/>



            
<link rel="shortcut icon" href="https://drmowinckels.io/img/fav.ico.png">


            


  
  
  
  <link rel="stylesheet" href="https://drmowinckels.io/css/main.min.8235b6920080e0a7f838f3272dcefed35808d4bd218e9f51f867612e95cab156.css" integrity="sha256-gjW2kgCA4Kf4OPMnLc7&#43;01gI1L0hjp9R&#43;GdhLpXKsVY=" crossorigin="anonymous" media="screen">




    <link rel="stylesheet" href="https://drmowinckels.io/css/syntax.css" integrity="" crossorigin="anonymous" media="screen">
    <link rel="stylesheet" href="https://drmowinckels.io/css/custom-style.css" integrity="" crossorigin="anonymous" media="screen">
        
        
        
        
    </head>
    <body> 
        <section id="top" class="section">
            
            <div class="container hero  fade-in one " style="background-image: url(/img/logo_large.svg);">
                
                

<h1 class="bold-title is-1">Blog</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
                
                    
                        <a class="navbar-item" href="https://drmowinckels.io/">
                            
                            Home
                            
                        </a>
                    
                
                    
                        <a class="navbar-item" href="https://drmowinckels.io/about">
                            
                            About
                            
                        </a>
                    
                
                    
                        <a class="navbar-item" href="https://drmowinckels.io/#blog">
                            
                            Blog
                            
                        </a>
                    
                
                    
                        <a class="navbar-item" href="https://drmowinckels.io/#contact">
                            
                            Contact
                            
                        </a>
                    
                
            
        </div>
    </nav>
    <hr>
</div>



                
<div class="container">
    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/">Christmas tree in ggplot</a>
    </h2>
    <div class="post-data">
        Dec 13, 2018 |
        4 minutes read
    </div>
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      
     <p>
         Tags:
          
           <a href="https://drmowinckels.io/tags/r">
             R</a>,
         
           <a href="https://drmowinckels.io/tags/plot">
             plot</a>
         
        </p>
      
    
      
    

    
</div>

<div class="container markdown top-pad">
    <p>It&rsquo;s Christmas! And I love Christmas! Pretty snow, cozy fires, fairy lights, family, friends and love. It&rsquo;s just filled with all times of lovely things.</p>
<p>That also means&hellip; PLOTS! You might know from my previous posts that I love plotting. A bit too much, but it truly is a lovely thing to create a great plot.</p>
<p>So, a while ago, the amazing <a href="rladies.org">RLadies</a> network showed me this cool thing a stats professor does each Christmas at the end of his visualisation lecture, I knew I had to do it! You can see all the lovely submissions he has <a href="http://smarterpoland.pl/index.php/2017/12/christmas-trees/">here</a>.</p>
<p>So here is my process for making the Christmas tree in ggplot.</p>

<h2 id="the-tree-cone" class="anchor-link"><a href="#the-tree-cone">The tree cone</a></h2>
<p>First, lest just make a triangle and make it green!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">,</span> <span class="n">quietly</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</span></span></code></pre></div><pre tabindex="0"><code>## ── Attaching packages ───────────────────────────────────────────────── tidyverse 1.3.0 ──
</code></pre><pre tabindex="0"><code>## ✓ ggplot2 3.3.0     ✓ purrr   0.3.4
## ✓ tibble  3.0.1     ✓ dplyr   0.8.5
## ✓ tidyr   1.0.3     ✓ stringr 1.4.0
## ✓ readr   1.3.1     ✓ forcats 0.5.0
</code></pre><pre tabindex="0"><code>## ── Conflicts ──────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">=</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">9</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="m">4</span><span class="o">:</span><span class="m">1</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">na.omit</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;#213c18&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-1-1.png" alt=""><!-- --></p>

<h2 id="add-some-fancy-stuff" class="anchor-link"><a href="#add-some-fancy-stuff">Add some fancy stuff</a></h2>
<p>This as acutally meant to alter the cone and get the distinct Christmas tree shape, but I couldn&rsquo;t manage the little &ldquo;dips&rdquo; at each branch, the wrong points kept connecting.
So it enved up with this more abstract, contemporary thing, which I actually really like!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">fancy</span> <span class="o">=</span> <span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">xoff</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="m">5</span><span class="p">,</span> <span class="n">x</span><span class="m">+.4</span><span class="p">,</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="p">,</span> <span class="n">x</span><span class="m">-.4</span><span class="p">,</span> <span class="kc">NA</span><span class="p">)))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">gather</span><span class="p">(</span><span class="n">del</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nf">contains</span><span class="p">(</span><span class="s">&#34;x&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">del</span><span class="o">==</span><span class="s">&#34;xoff&#34;</span><span class="p">,</span> <span class="n">y</span><span class="m">-.1</span><span class="p">,</span><span class="n">y</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">filter</span><span class="p">(</span><span class="n">y</span><span class="o">&gt;=</span><span class="m">1</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">na.omit</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">del</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">arrange</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;#213c18&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fancy</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s">&#34;#668c6f&#34;</span><span class="p">)</span>
</span></span></code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-2-1.png" alt=""><!-- --></p>

<h2 id="baubles" class="anchor-link"><a href="#baubles">BAUBLES!</a></h2>
<p>What christmas tree would it be without some baubles!
We define some nice christmas&rsquo;y colours, do some data sample-randomness stuff, and voila!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="nf">library</span><span class="p">(</span><span class="n">gganimate</span><span class="p">,</span> <span class="n">quietly</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Define bauble colours</span>
</span></span><span class="line"><span class="cl"><span class="n">bauble_colours</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#34;#e5d08f&#34;</span><span class="p">,</span> <span class="s">&#34;#e3d4b6&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;#cacbce&#34;</span><span class="p">,</span> <span class="s">&#34;#9c9c9c&#34;</span><span class="p">,</span> <span class="s">&#34;#e1dfdf&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                   <span class="s">&#34;#c94c4c&#34;</span><span class="p">,</span> <span class="s">&#34;#8d1414&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">baubles</span> <span class="o">=</span> <span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Group by y, nest and make up some random values for x.</span>
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">nest</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span>  <span class="nf">map</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">~</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nf">seq</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">.$x</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="n">.$x</span><span class="p">),</span> <span class="n">by</span><span class="o">=</span><span class="m">.1</span><span class="p">))))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">unnest</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Group by x, nest and make up some random values for y.</span>
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">nest</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span>  <span class="nf">map</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">~</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="nf">seq</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">.$y</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="n">.$y</span><span class="p">),</span> <span class="n">by</span><span class="o">=</span><span class="m">.1</span><span class="p">))))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">unnest</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ungroup</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Give baubles random shapes, sizes and two different colours.</span>
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">col1</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="n">bauble_colours</span><span class="p">,</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">col2</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="n">bauble_colours</span><span class="p">,</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">shp</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">7</span><span class="p">,</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">sz</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">.5</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="m">.1</span><span class="p">),</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">         <span class="n">time</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">.5</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="m">.01</span><span class="p">),</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span> <span class="o">%&gt;%</span>
</span></span><span class="line"><span class="cl">  <span class="nf">rownames_to_column</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Grab only 60 baubles</span>
</span></span><span class="line"><span class="cl">  <span class="nf">sample_n</span><span class="p">(</span><span class="m">60</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Gather the colours into a single column</span>
</span></span><span class="line"><span class="cl">  <span class="nf">gather</span><span class="p">(</span><span class="n">dd</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="nf">contains</span><span class="p">(</span><span class="s">&#34;col&#34;</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">alph</span> <span class="o">=</span> <span class="nf">ifelse</span><span class="p">(</span><span class="n">dd</span> <span class="o">==</span> <span class="s">&#34;col1&#34;</span><span class="p">,</span> <span class="m">.8</span><span class="p">,</span> <span class="m">1</span><span class="p">))</span>
</span></span></code></pre></div><pre tabindex="0"><code>## Warning: `cols` is now required.
## Please use `cols = c(data)`

## Warning: `cols` is now required.
## Please use `cols = c(data)`
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;#213c18&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fancy</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s">&#34;#668c6f&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">baubles</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> 
</span></span><span class="line"><span class="cl">                                 <span class="n">shape</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">shp</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">sz</span><span class="p">),</span> <span class="n">show.legend</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">scale_shape_manual</span><span class="p">(</span><span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">20</span><span class="o">:</span><span class="m">25</span><span class="p">,</span><span class="m">8</span><span class="p">))</span>
</span></span></code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-3-1.png" alt=""><!-- --></p>

<h2 id="add-the-topper-and-animate-some-sparkly" class="anchor-link"><a href="#add-the-topper-and-animate-some-sparkly">Add the topper and animate some sparkly!</a></h2>
<p>We need a tree topper, in Norway, we usually add the Christmas star.
And then I wanted some ornaments to seemlingly sparkle a little, so we add a small animation too!</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Cone</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;#213c18&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Fancy</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fancy</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s">&#34;#668c6f&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Baubles</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">baubles</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">time</span><span class="p">),</span> <span class="n">show.legend</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">.7</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="nf">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                 <span class="n">shape</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">shp</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">sz</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">rowname</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># animated baubles!</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">baubles</span><span class="p">,</span> <span class="n">show.legend</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="nf">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">alph</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                 <span class="n">shape</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">shp</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">sz</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">rowname</span><span class="p">))</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Topper</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="m">5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="m">5</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="s">&#34;#e5d08f&#34;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">15</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="m">8</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scale_shape_manual</span><span class="p">(</span><span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">20</span><span class="o">:</span><span class="m">25</span><span class="p">,</span><span class="m">8</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># remove axes etc., and make background black</span>
</span></span><span class="line"><span class="cl">  <span class="nf">theme_void</span><span class="p">()</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">theme</span><span class="p">(</span><span class="n">plot.background</span> <span class="o">=</span> <span class="nf">element_rect</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;black&#34;</span><span class="p">),</span> <span class="n">title</span> <span class="o">=</span> <span class="nf">element_text</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="s">&#34;white&#34;</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Animate</span>
</span></span><span class="line"><span class="cl">  <span class="c1">#transition_states(time, transition_length = 10, state_length = 2) + </span>
</span></span><span class="line"><span class="cl">  <span class="nf">transition_time</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ease_aes</span><span class="p">(</span><span class="s">&#39;quadratic-in-out&#39;</span><span class="p">)</span> 
</span></span></code></pre></div><p><img src="index_files/figure-html/unnamed-chunk-4-1.gif" alt=""><!-- --></p>

<h2 id="the-snow" class="anchor-link"><a href="#the-snow">The snow!</a></h2>
<p>I also wanted to have some snow falling in the background.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">snow</span> <span class="o">=</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="nf">max</span><span class="p">(</span><span class="n">cone</span><span class="o">$</span><span class="n">x</span><span class="p">)</span><span class="m">+1</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="m">.01</span><span class="p">),</span> <span class="m">100</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">F</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                  <span class="n">y</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="nf">max</span><span class="p">(</span><span class="n">cone</span><span class="o">$</span><span class="n">y</span><span class="p">)</span><span class="m">+1</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="m">.01</span><span class="p">),</span> <span class="m">100</span><span class="p">,</span> <span class="n">replace</span> <span class="o">=</span> <span class="bp">F</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">nest</span><span class="p">()</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">mutate</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span>  <span class="nf">map</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">                     <span class="o">~</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="nf">seq</span><span class="p">(</span><span class="n">.$y</span><span class="p">,</span> <span class="n">.$y</span><span class="o">-</span><span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">.5</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="m">.01</span><span class="p">),</span><span class="m">1</span><span class="p">),</span> <span class="n">length.out</span> <span class="o">=</span> <span class="m">100</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">                       <span class="nf">mutate</span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="nf">sample</span><span class="p">(</span><span class="nf">seq</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span><span class="m">.9</span><span class="p">,</span> <span class="m">.01</span><span class="p">),</span> <span class="m">1</span><span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">                       <span class="nf">mutate</span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="nf">seq</span><span class="p">(</span><span class="nf">unique</span><span class="p">(</span><span class="n">time</span><span class="p">),</span> <span class="nf">unique</span><span class="p">(</span><span class="n">time</span><span class="p">)</span><span class="m">+.02</span><span class="p">,</span> <span class="n">length.out</span> <span class="o">=</span> <span class="nf">nrow</span><span class="p">(</span><span class="n">.)</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">  <span class="p">))</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">unnest</span><span class="p">()</span> 
</span></span></code></pre></div><pre tabindex="0"><code>## Warning: `cols` is now required.
## Please use `cols = c(data)`
</code></pre><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-r" data-lang="r"><span class="line"><span class="cl"><span class="n">cone</span> <span class="o">%&gt;%</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Snow</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_jitter</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">snow</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="n">x</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="s">&#34;white&#34;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="m">8</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">1</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Cone</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;#213c18&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Fancy</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_polygon</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">fancy</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="s">&#34;#668c6f&#34;</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Baubles</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">baubles</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">time</span><span class="p">),</span> <span class="n">show.legend</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="m">.7</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="nf">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                 <span class="n">shape</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">shp</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">sz</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">rowname</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># animated baubles!</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">baubles</span><span class="p">,</span> <span class="n">show.legend</span> <span class="o">=</span> <span class="bp">F</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">             <span class="nf">aes</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">cols</span><span class="p">),</span> <span class="n">alpha</span><span class="o">=</span><span class="nf">I</span><span class="p">(</span><span class="n">alph</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                 <span class="n">shape</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">shp</span><span class="p">),</span><span class="n">size</span><span class="o">=</span><span class="n">sz</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">rowname</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Topper</span>
</span></span><span class="line"><span class="cl">  <span class="nf">geom_point</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="m">5</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="m">5</span><span class="p">),</span> <span class="n">colour</span><span class="o">=</span><span class="s">&#34;#e5d08f&#34;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="m">15</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="m">8</span><span class="p">)</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scale_shape_manual</span><span class="p">(</span><span class="n">values</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">20</span><span class="o">:</span><span class="m">25</span><span class="p">,</span><span class="m">8</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># remove axes etc., and make background black</span>
</span></span><span class="line"><span class="cl">  <span class="nf">theme_void</span><span class="p">()</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">theme</span><span class="p">(</span><span class="n">plot.background</span> <span class="o">=</span> <span class="nf">element_rect</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s">&#34;black&#34;</span><span class="p">),</span> <span class="n">title</span> <span class="o">=</span> <span class="nf">element_text</span><span class="p">(</span><span class="n">colour</span><span class="o">=</span><span class="s">&#34;white&#34;</span><span class="p">))</span> <span class="o">+</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1"># Animate</span>
</span></span><span class="line"><span class="cl">  <span class="nf">transition_time</span><span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="o">+</span> 
</span></span><span class="line"><span class="cl">  <span class="nf">ease_aes</span><span class="p">(</span><span class="s">&#39;sine-in-out&#39;</span><span class="p">)</span> 
</span></span></code></pre></div><p><img src="index_files/figure-html/featured-1.gif" alt=""><!-- --></p>
<p>There you go! My little Christmas tree!</p>

<h1 id="merry-christmas-yall" class="anchor-link"><a href="#merry-christmas-yall">Merry Christmas, y&rsquo;all!</a></h1>


    
    <h3>Citation</h3>
    <div class="columns">
      <div class="column is-half">
        For attribution, please cite this work as
        <div class="highlight" style="border: 1px solid grey">
          <p style="padding: 1em;font-family: 'monospace">
            DrMowinckel (Dec 13, 2018) Christmas tree in ggplot. Retrieved from https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/
          </p>
        </div>
      </div>
      <div class="column is-half">
        <b>BibTeX citation</b>
        <div class="highlight" style="border: 1px solid grey">
          <p style="padding: 1em;font-family: 'monospace">
            @misc{ 2018-christmas-tree-in-ggplot,<br>
            &emsp;author = { DrMowinckel },<br>
            &emsp;title = { Christmas tree in ggplot },<br>
            &emsp;url = { https://drmowinckels.io/blog/2018/christmas-tree-in-ggplot/ },<br>
            &emsp;year = { 2018 }<br>
            &emsp;updated = { Nov 4, 2023 }<br>
            }
          </p>
        </div>
      </div>
    </div>
  

</div>


<div class="container giscus my-4">
    <script src="https://giscus.app/client.js"
        data-repo=DrMowinckels/DrMowinckels
        data-repo-id=MDEwOlJlcG9zaXRvcnkxMjM0NzEwMTI&#61;
        data-category=Comments
        data-category-id=DIC_kwDOB1wEpM4CAG0c
        data-mapping=pathname
        data-reactions-enabled=1
        data-emit-metadata=0
        data-theme=light
        data-lang=en
        crossorigin="anonymous"
        async>
    </script>
</div>



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            Athanasia Monika Mowinckel <i class="fab fa-creative-commons" aria-hidden="true"></i>-<i class="fab fa-creative-commons-by"></i>-<i class="fab fa-creative-commons-sa"></i>-2020. Feeding to <a href="https://rweekly.org'">R weekly</a>. View source code on <a href="https://github.com/Athanasiamo/DrMowinckels"><i class="fab fa-github"></i></a>.
        </span>
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://drmowinckels.io/js/bundle.5c23c0437f001a469ca373a465a6f7487203d18e10cdff76d86a60af66d5ee28.js" integrity="sha256-XCPAQ38AGkaco3OkZab3SHID0Y4Qzf922Gpgr2bV7ig=" crossorigin="anonymous">></script>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-115545202-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>








  <script defer data-domain=drmowinckels.io src="https://plausible.io/js/plausible.js"></script>






        
        
        
        
    </body>
</html>
